# Spring Core ν•™μµ μ •λ¦¬ - μμ΅΄μ„± μ£Όμ… (DI)
**μ‘μ„±μΌ**: 2026λ…„ 1μ›” 15μΌ

---

## π“ λ©μ°¨
1. [ν”„λ΅μ νΈ κ°μ”](#ν”„λ΅μ νΈ-κ°μ”)
2. [μ „μ²΄ ν”„λ΅μ νΈ κµ¬μ΅°](#μ „μ²΄-ν”„λ΅μ νΈ-κµ¬μ΅°)
3. [ν•µμ‹¬ κ°λ…](#ν•µμ‹¬-κ°λ…)
4. [κ° κ³„μΈµλ³„ μ½”λ“ μ„¤λ…](#κ°-κ³„μΈµλ³„-μ½”λ“-μ„¤λ…)
5. [μμ΅΄μ„± μ£Όμ… (DI) ν¨ν„΄](#μμ΅΄μ„±-μ£Όμ…-di-ν¨ν„΄)
6. [ν…μ¤νΈ μ½”λ“](#ν…μ¤νΈ-μ½”λ“)
7. [ν•™μµ ν¬μΈνΈ](#ν•™μµ-ν¬μΈνΈ)

---

## ν”„λ΅μ νΈ κ°μ”

μ΄ ν”„λ΅μ νΈλ” **Springμ ν•µμ‹¬ μ›λ¦¬μΈ μμ΅΄μ„± μ£Όμ…(DI, Dependency Injection)**μ„ ν•™μµν•κΈ° μ„ν• μμ μ…λ‹λ‹¤.

**λΉ„μ¦λ‹μ¤ μ”κµ¬μ‚¬ν•­**:
- νμ›μ„ κ°€μ…ν•κ³  μ΅°νν•  μ μλ‹¤
- νμ›μ€ μΌλ°(BASIC)κ³Ό VIP λ“±κΈ‰μ΄ μλ‹¤
- μ£Όλ¬Έμ„ μƒμ„±ν•  μ μλ‹¤
- VIP νμ›μ€ ν• μΈ ννƒμ„ λ°›μ„ μ μλ‹¤

---

## μ „μ²΄ ν”„λ΅μ νΈ κµ¬μ΅°

```
core/
β”β”€β”€ src/main/java/hello/core/
β”‚   β”β”€β”€ AppConfig.java                 # β­ μμ΅΄μ„± μ„¤μ • ν΄λμ¤
β”‚   β”β”€β”€ CoreApplication.java           # Spring Boot λ©”μΈ ν΄λμ¤
β”‚   β”β”€β”€ OrderApp.java                  # μ£Όλ¬Έ μ‹¤ν–‰ μ•±
β”‚   β”‚
β”‚   β”β”€β”€ member/                        # νμ› λ„λ©”μΈ
β”‚   β”‚   β”β”€β”€ Grade.java                 # νμ› λ“±κΈ‰ enum
β”‚   β”‚   β”β”€β”€ Member.java                # νμ› μ—”ν‹°ν‹°
β”‚   β”‚   β”β”€β”€ MemberService.java         # νμ› μ„λΉ„μ¤ μΈν„°νμ΄μ¤
β”‚   β”‚   β”β”€β”€ MemberServiceImpl.java     # νμ› μ„λΉ„μ¤ κµ¬ν„μ²΄
β”‚   β”‚   β”β”€β”€ MemberRepository.java      # νμ› μ €μ¥μ† μΈν„°νμ΄μ¤
β”‚   β”‚   β””β”€β”€ MemoryMemberRepository.java # λ©”λ¨λ¦¬ μ €μ¥μ† κµ¬ν„μ²΄
β”‚   β”‚
β”‚   β”β”€β”€ order/                         # μ£Όλ¬Έ λ„λ©”μΈ
β”‚   β”‚   β”β”€β”€ Order.java                 # μ£Όλ¬Έ μ—”ν‹°ν‹°
β”‚   β”‚   β”β”€β”€ OrderService.java          # μ£Όλ¬Έ μ„λΉ„μ¤ μΈν„°νμ΄μ¤
β”‚   β”‚   β”β”€β”€ OrderServiceImpl.java      # μ£Όλ¬Έ μ„λΉ„μ¤ κµ¬ν„μ²΄
β”‚   β”‚   β””β”€β”€ MemberApp.java             # νμ› μ‹¤ν–‰ μ•±
β”‚   β”‚
β”‚   β””β”€β”€ discount/                      # ν• μΈ μ •μ±…
β”‚       β”β”€β”€ DiscountPolicy.java        # ν• μΈ μ •μ±… μΈν„°νμ΄μ¤
β”‚       β”β”€β”€ FixDiscountPolicy.java     # κ³ μ • ν• μΈ μ •μ±… (1000μ›)
β”‚       β””β”€β”€ RateDiscountPolicy.java    # λΉ„μ¨ ν• μΈ μ •μ±… (10%)
β”‚
β””β”€β”€ src/test/java/hello/core/
    β”β”€β”€ member/
    β”‚   β””β”€β”€ MemberServiceTest.java     # νμ› μ„λΉ„μ¤ ν…μ¤νΈ
    β””β”€β”€ order/
        β””β”€β”€ OrderServiceTest.java      # μ£Όλ¬Έ μ„λΉ„μ¤ ν…μ¤νΈ
```

---

## ν•µμ‹¬ κ°λ…

### 1οΈβƒ£ μμ΅΄μ„± μ£Όμ… (Dependency Injection)

**λ¬Έμ μ  (DI μ μ© μ „)**:
```java
public class MemberServiceImpl implements MemberService {
    // κµ¬μ²΄ ν΄λμ¤μ— μ§μ ‘ μμ΅΄ β†’ DIP μ„λ°!
    private final MemberRepository memberRepository = new MemoryMemberRepository();
}
```

**ν•΄κ²°μ±… (DI μ μ© ν›„)**:
```java
public class MemberServiceImpl implements MemberService {
    private final MemberRepository memberRepository;
    
    // μƒμ„±μλ¥Ό ν†µν•΄ μ™Έλ¶€μ—μ„ μ£Όμ…λ°›μ β†’ DIP μ¤€μ!
    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
}
```

### 2οΈβƒ£ SOLID μ›μΉ™

#### OCP (Open-Closed Principle) - κ°λ°©-νμ‡„ μ›μΉ™
- **κ°λ°©**: ν™•μ¥μ—λ” μ—΄λ ¤μλ‹¤ (μƒλ΅μ΄ ν• μΈ μ •μ±… μ¶”κ°€ κ°€λ¥)
- **νμ‡„**: λ³€κ²½μ—λ” λ‹«ν€μλ‹¤ (κΈ°μ΅΄ μ½”λ“ μμ • μ—†μ΄ μ •μ±… λ³€κ²½)

#### DIP (Dependency Inversion Principle) - μμ΅΄κ΄€κ³„ μ—­μ „ μ›μΉ™
- κµ¬μ²΄ ν΄λμ¤κ°€ μ•„λ‹ **μΈν„°νμ΄μ¤μ— μμ΅΄**ν•΄μ•Ό ν•λ‹¤
- `MemberServiceImpl`μ€ `MemoryMemberRepository`κ°€ μ•„λ‹ `MemberRepository` μΈν„°νμ΄μ¤μ— μμ΅΄

---

## κ° κ³„μΈµλ³„ μ½”λ“ μ„¤λ…

### π”· 1. νμ› λ„λ©”μΈ (member)

#### Grade.java - νμ› λ“±κΈ‰
```java
public enum Grade {
    BASIC,  // μΌλ° νμ›
    VIP     // VIP νμ›
}
```
**μ—­ν• **: νμ›μ λ“±κΈ‰μ„ ν‘ν„ν•λ” μ—΄κ±°ν•

---

#### Member.java - νμ› μ—”ν‹°ν‹°
```java
public class Member {
    private final Long id;        // νμ› ID
    private final String name;    // νμ› μ΄λ¦„
    private final Grade grade;    // νμ› λ“±κΈ‰
    
    public Member(Long id, String name, Grade grade) {
        this.id = id;
        this.name = name;
        this.grade = grade;
    }
    
    // getter λ©”μ„λ“λ“¤...
}
```
**μ—­ν• **: νμ› μ •λ³΄λ¥Ό λ‹΄λ” λ¶λ³€(immutable) κ°μ²΄
**νΉμ§•**: 
- `final` ν‚¤μ›λ“λ΅ κ°’ λ³€κ²½ λ¶κ°€λ¥
- setterκ°€ μ—†μ–΄ μƒμ„± ν›„ μμ • λ¶κ°€

---

#### MemberRepository.java - νμ› μ €μ¥μ† μΈν„°νμ΄μ¤
```java
public interface MemberRepository {
    void save(Member member);           // νμ› μ €μ¥
    Member findById(Long memberId);     // νμ› μ΅°ν
}
```
**μ—­ν• **: νμ› λ°μ΄ν„° μ €μ¥/μ΅°νλ¥Ό μ„ν• μΈν„°νμ΄μ¤
**μ¥μ **: κµ¬ν„μ²΄λ¥Ό κµμ²΄ν•  μ μμ (λ©”λ¨λ¦¬ DB β†’ μ‹¤μ  DB)

---

#### MemoryMemberRepository.java - λ©”λ¨λ¦¬ μ €μ¥μ†
```java
public class MemoryMemberRepository implements MemberRepository {
    private static final Map<Long, Member> store = new HashMap<>();
    
    @Override
    public void save(Member member) {
        store.put(member.getId(), member);
    }
    
    @Override
    public Member findById(Long memberId) {
        return store.get(memberId);
    }
}
```
**μ—­ν• **: λ©”λ¨λ¦¬(HashMap)μ— νμ› μ •λ³΄λ¥Ό μ €μ¥ν•λ” κµ¬ν„μ²΄
**νΉμ§•**: μ„λ²„ μ¬μ‹μ‘ μ‹ λ°μ΄ν„°κ°€ μ‚¬λΌμ§ (ν…μ¤νΈμ©)

---

#### MemberService.java - νμ› μ„λΉ„μ¤ μΈν„°νμ΄μ¤
```java
public interface MemberService {
    void join(Member member);           // νμ› κ°€μ…
    Member findMember(Long memberId);   // νμ› μ΅°ν
}
```
**μ—­ν• **: νμ› λΉ„μ¦λ‹μ¤ λ΅μ§μ„ μ •μν•λ” μΈν„°νμ΄μ¤

---

#### MemberServiceImpl.java - νμ› μ„λΉ„μ¤ κµ¬ν„μ²΄ β­
```java
public class MemberServiceImpl implements MemberService {
    private final MemberRepository memberRepository;
    
    // μƒμ„±μ μ£Όμ… λ°©μ‹
    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
    
    @Override
    public void join(Member member) {
        memberRepository.save(member);
    }
    
    @Override
    public Member findMember(Long memberId) {
        return memberRepository.findById(memberId);
    }
}
```
**μ—­ν• **: νμ› λΉ„μ¦λ‹μ¤ λ΅μ§μ„ κµ¬ν„
**ν•µμ‹¬**: 
- μƒμ„±μλ¥Ό ν†µν•΄ `MemberRepository`λ¥Ό μ£Όμ…λ°›μ
- κµ¬μ²΄ ν΄λμ¤κ°€ μ•„λ‹ μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ (DIP μ¤€μ)

---

### π”· 2. μ£Όλ¬Έ λ„λ©”μΈ (order)

#### Order.java - μ£Όλ¬Έ μ—”ν‹°ν‹°
```java
public class Order {
    private Long memberId;
    private String itemName;
    private int itemPrice;
    private int discountPrice;
    
    public Order(Long memberId, String itemName, int itemPrice, int discountPrice) {
        this.memberId = memberId;
        this.itemName = itemName;
        this.itemPrice = itemPrice;
        this.discountPrice = discountPrice;
    }
    
    // μµμΆ… κ²°μ  κΈμ•΅ κ³„μ‚°
    public int calculatePrice() {
        return itemPrice - discountPrice;
    }
    
    // getter λ©”μ„λ“λ“¤...
}
```
**μ—­ν• **: μ£Όλ¬Έ μ •λ³΄λ¥Ό λ‹΄λ” κ°μ²΄
**ν•µμ‹¬ λ©”μ„λ“**: `calculatePrice()` - ν• μΈμ΄ μ μ©λ μµμΆ… κ°€κ²© κ³„μ‚°

---

#### OrderService.java - μ£Όλ¬Έ μ„λΉ„μ¤ μΈν„°νμ΄μ¤
```java
public interface OrderService {
    Order createOrder(Long memberId, String itemName, int itemPrice);
}
```
**μ—­ν• **: μ£Όλ¬Έ μƒμ„± λΉ„μ¦λ‹μ¤ λ΅μ§μ„ μ •μ

---

#### OrderServiceImpl.java - μ£Όλ¬Έ μ„λΉ„μ¤ κµ¬ν„μ²΄ β­
```java
public class OrderServiceImpl implements OrderService {
    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;
    
    // μƒμ„±μ μ£Όμ… λ°©μ‹ (λ‘ κ°μ μμ΅΄μ„±)
    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }
    
    @Override
    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        // 1. νμ› μ΅°ν
        Member member = memberRepository.findById(memberId);
        
        // 2. ν• μΈ μ •μ±… μ μ© (λ‹¨μΌ μ±…μ„ μ›μΉ™ - SRP)
        int discountPrice = discountPolicy.discount(member, itemPrice);
        
        // 3. μ£Όλ¬Έ μƒμ„± λ° λ°ν™
        return new Order(memberId, itemName, itemPrice, discountPrice);
    }
}
```
**μ—­ν• **: μ£Όλ¬Έ μƒμ„± λΉ„μ¦λ‹μ¤ λ΅μ§μ„ κµ¬ν„
**ν•µμ‹¬**: 
- `MemberRepository`μ™€ `DiscountPolicy` λ‘ μμ΅΄μ„±μ„ μ£Όμ…λ°›μ
- ν• μΈ κ³„μ‚°μ€ `DiscountPolicy`μ— μ„μ„ (λ‹¨μΌ μ±…μ„ μ›μΉ™)

---

### π”· 3. ν• μΈ μ •μ±… (discount)

#### DiscountPolicy.java - ν• μΈ μ •μ±… μΈν„°νμ΄μ¤
```java
public interface DiscountPolicy {
    /**
     * @return ν• μΈ λ€μƒ κΈμ•΅
     */
    int discount(Member member, int price);
}
```
**μ—­ν• **: ν• μΈ μ •μ±…μ„ μ •μν•λ” μΈν„°νμ΄μ¤

---

#### FixDiscountPolicy.java - κ³ μ • ν• μΈ μ •μ±…
```java
public class FixDiscountPolicy implements DiscountPolicy {
    private int discountFixAmount = 1000; // 1000μ› ν• μΈ
    
    @Override
    public int discount(Member member, int price) {
        if (member.getGrade() == Grade.VIP) {
            return discountFixAmount;
        } else {
            return 0;
        }
    }
}
```
**μ—­ν• **: VIP νμ›μ—κ² 1000μ›μ„ κ³ μ • ν• μΈν•΄μ£Όλ” μ •μ±…

---

#### RateDiscountPolicy.java - λΉ„μ¨ ν• μΈ μ •μ±…
```java
public class RateDiscountPolicy implements DiscountPolicy {
    private int discountPercent = 10; // 10% ν• μΈ
    
    @Override
    public int discount(Member member, int price) {
        if (member.getGrade() == Grade.VIP) {
            return price * discountPercent / 100;
        } else {
            return 0;
        }
    }
}
```
**μ—­ν• **: VIP νμ›μ—κ² κ°€κ²©μ 10%λ¥Ό ν• μΈν•΄μ£Όλ” μ •μ±…
**μμ‹**: 10,000μ› μƒν’ β†’ 1,000μ› ν• μΈ

---

### π”· 4. AppConfig.java - μμ΅΄μ„± μ„¤μ • ν΄λμ¤ β­β­β­

```java
package hello.core;

import hello.core.discount.DiscountPolicy;
import hello.core.discount.FixDiscountPolicy;
import hello.core.member.MemberRepository;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;

public class AppConfig {
    
    // νμ› μ„λΉ„μ¤ μƒμ„±
    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }
    
    // νμ› μ €μ¥μ† μƒμ„±
    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }
    
    // μ£Όλ¬Έ μ„λΉ„μ¤ μƒμ„±
    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }
    
    // ν• μΈ μ •μ±… μƒμ„±
    public DiscountPolicy discountPolicy() {
        return new FixDiscountPolicy();
        // μ •μ±… λ³€κ²½ μ‹ μ—¬κΈ°λ§ μμ •!
        // return new RateDiscountPolicy();
    }
}
```

**μ—­ν• **: μ• ν”λ¦¬μΌ€μ΄μ…μ **μ‹¤μ  λ™μ‘μ— ν•„μ”ν• κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±**ν•κ³  **μ—°κ²°**

**ν•µμ‹¬ ν¬μΈνΈ**:
1. **κµ¬ν„ κ°μ²΄ μƒμ„±**: μ‹¤μ  μ‚¬μ©ν•  κµ¬μ²΄ ν΄λμ¤ μΈμ¤ν„΄μ¤ μƒμ„±
2. **μƒμ„±μ μ£Όμ…**: μƒμ„±ν• κ°μ²΄λ¥Ό μƒμ„±μλ¥Ό ν†µν•΄ μ£Όμ…
3. **λ‹¨μΌ μ±…μ„**: κ° λ©”μ„λ“κ°€ ν•λ‚μ μ—­ν• λ§ λ‹΄λ‹Ή (SRP)
4. **μ¤‘λ³µ μ κ±°**: `memberRepository()` λ©”μ„λ“λ¥Ό μ—¬λ¬ κ³³μ—μ„ μ¬μ‚¬μ©

**λ³€κ²½μ μ©μ΄μ„±**:
- ν• μΈ μ •μ±…μ„ λ³€κ²½ν•κ³  μ‹¶λ‹¤λ©΄? β†’ `discountPolicy()` λ©”μ„λ“λ§ μμ •
- μ €μ¥μ†λ¥Ό λ³€κ²½ν•κ³  μ‹¶λ‹¤λ©΄? β†’ `memberRepository()` λ©”μ„λ“λ§ μμ •
- **λ‹¤λ¥Έ μ½”λ“λ” μ „ν€ μμ •ν•μ§€ μ•μ•„λ„ λ¨!** (OCP μ¤€μ)

---

## μμ΅΄μ„± μ£Όμ… (DI) ν¨ν„΄

### Before: μ§μ ‘ μƒμ„± λ°©μ‹ (DI μ μ© μ „) β

```java
public class OrderServiceImpl implements OrderService {
    // λ¬Έμ μ : κµ¬μ²΄ ν΄λμ¤μ— μ§μ ‘ μμ΅΄
    private final MemberRepository memberRepository = new MemoryMemberRepository();
    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
    
    // ν• μΈ μ •μ±…μ„ λ³€κ²½ν•λ ¤λ©΄ μ΄ μ½”λ“λ¥Ό μ§μ ‘ μμ •ν•΄μ•Ό ν•¨!
}
```

**λ¬Έμ μ **:
- `OrderServiceImpl`μ΄ κµ¬μ²΄ ν΄λμ¤(`MemoryMemberRepository`, `FixDiscountPolicy`)μ— μ§μ ‘ μμ΅΄
- ν• μΈ μ •μ±…μ„ λ³€κ²½ν•λ ¤λ©΄ `OrderServiceImpl` μ½”λ“λ¥Ό μ§μ ‘ μμ •ν•΄μ•Ό ν•¨
- **DIP μ„λ°**: κµ¬μ²΄ ν΄λμ¤μ— μμ΅΄
- **OCP μ„λ°**: λ³€κ²½μ— μ½”λ“ μμ •μ΄ ν•„μ”

---

### After: μƒμ„±μ μ£Όμ… λ°©μ‹ (DI μ μ© ν›„) β…

```java
public class OrderServiceImpl implements OrderService {
    // μΈν„°νμ΄μ¤μ—λ§ μμ΅΄
    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;
    
    // μƒμ„±μλ¥Ό ν†µν•΄ μ™Έλ¶€μ—μ„ μ£Όμ…λ°›μ
    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }
    
    // κµ¬ν„ λ΅μ§...
}
```

**μ¥μ **:
- `OrderServiceImpl`μ€ μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ (DIP μ¤€μ)
- μ–΄λ–¤ κµ¬ν„μ²΄κ°€ μ£Όμ…λ μ§€λ” `AppConfig`μ—μ„ κ²°μ •
- `OrderServiceImpl` μ½”λ“ μμ • μ—†μ΄ μ •μ±… λ³€κ²½ κ°€λ¥ (OCP μ¤€μ)
- **ν…μ¤νΈκ°€ μ‰¬μ›μ§**: Mock κ°μ²΄ μ£Όμ… κ°€λ¥

---

### μμ΅΄μ„± μ£Όμ… νλ¦„λ„

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  AppConfig  β”‚ β† μμ΅΄μ„±μ„ μ„¤μ •ν•κ³  μ£Όμ…ν•λ” μ—­ν• 
β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”
       β”‚ creates & injects
       β†“
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”      β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ OrderServiceImpl     β”‚ uses β”‚ DiscountPolicy      β”‚
β”‚ - memberRepository   β”‚β”€β”€β”€β”€β”€β†’β”‚ (μΈν„°νμ΄μ¤)         β”‚
β”‚ - discountPolicy     β”‚      β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”              β†‘
       β”‚                              β”‚ implements
       β”‚ uses                         β”‚
       β†“                              β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”      β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ MemberRepository    β”‚      β”‚ FixDiscountPolicy   β”‚
β”‚ (μΈν„°νμ΄μ¤)         β”‚      β”‚ (κµ¬μ²΄ ν΄λμ¤)        β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”      β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
       β†‘
       β”‚ implements
       β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ MemoryMemberRepo..  β”‚
β”‚ (κµ¬μ²΄ ν΄λμ¤)        β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

---

## ν…μ¤νΈ μ½”λ“

### MemberServiceTest.java - νμ› μ„λΉ„μ¤ ν…μ¤νΈ

```java
class MemberServiceTest {
    MemberService memberService;
    
    @BeforeEach
    public void beforeEach() {
        // κ° ν…μ¤νΈ μ‹¤ν–‰ μ „μ— AppConfigλ¥Ό ν†µν•΄ μμ΅΄μ„± μ£Όμ…
        AppConfig appConfig = new AppConfig();
        memberService = appConfig.memberService();
    }
    
    @Test
    void join() {
        //given - μ¤€λΉ„
        Member member = new Member(1L, "memberA", Grade.VIP);
        
        //when - μ‹¤ν–‰
        memberService.join(member);
        Member findMember = memberService.findMember(1L);
        
        //then - κ²€μ¦
        Assertions.assertThat(member).isEqualTo(findMember);
    }
}
```

**ν…μ¤νΈ ν¨ν„΄**: Given-When-Then
- **Given**: ν…μ¤νΈμ— ν•„μ”ν• λ°μ΄ν„° μ¤€λΉ„
- **When**: ν…μ¤νΈν•λ ¤λ” λ™μ‘ μ‹¤ν–‰
- **Then**: κ²°κ³Ό κ²€μ¦

---

### OrderServiceTest.java - μ£Όλ¬Έ μ„λΉ„μ¤ ν…μ¤νΈ

```java
class OrderServiceTest {
    MemberService memberService;
    OrderService orderService;
    
    @BeforeEach
    public void beforeEach() {
        AppConfig appConfig = new AppConfig();
        memberService = appConfig.memberService();
        orderService = appConfig.orderService();
    }
    
    @Test
    void createOrder() {
        //given
        long memberId = 1L;
        Member member = new Member(memberId, "memberA", Grade.VIP);
        memberService.join(member);
        
        //when
        Order order = orderService.createOrder(memberId, "itemA", 10000);
        
        //then
        Assertions.assertThat(order.getDiscountPrice()).isEqualTo(1000);
    }
}
```

**ν…μ¤νΈ λ‚΄μ©**:
1. VIP νμ› μƒμ„± λ° κ°€μ…
2. 10,000μ› μƒν’ μ£Όλ¬Έ
3. 1,000μ› ν• μΈμ΄ μ μ©λμ—λ”μ§€ κ²€μ¦

---

## ν•™μµ ν¬μΈνΈ

### 1οΈβƒ£ κ°μ²΄ μ§€ν–¥ μ„¤κ³„μ 5μ›μΉ™ (SOLID)

| μ›μΉ™ | μ„¤λ… | ν”„λ΅μ νΈ μ μ© |
|------|------|--------------|
| **SRP**<br>(λ‹¨μΌ μ±…μ„) | ν• ν΄λμ¤λ” ν•λ‚μ μ±…μ„λ§ | `OrderServiceImpl`μ€ μ£Όλ¬Έ μƒμ„±λ§, ν• μΈμ€ `DiscountPolicy`μ— μ„μ„ |
| **OCP**<br>(κ°λ°©-νμ‡„) | ν™•μ¥μ—λ” μ—΄λ ¤μκ³ , λ³€κ²½μ—λ” λ‹«ν€μλ‹¤ | ν• μΈ μ •μ±… λ³€κ²½ μ‹ `AppConfig`λ§ μμ • |
| **LSP**<br>(λ¦¬μ¤μ½”ν”„ μΉν™) | ν•μ„ νƒ€μ…μ€ μƒμ„ νƒ€μ…μ„ λ€μ²΄ν•  μ μλ‹¤ | `FixDiscountPolicy`, `RateDiscountPolicy` λ¨λ‘ `DiscountPolicy`λ΅ λ€μ²΄ κ°€λ¥ |
| **ISP**<br>(μΈν„°νμ΄μ¤ λ¶„λ¦¬) | μΈν„°νμ΄μ¤λ¥Ό ν΄λΌμ΄μ–ΈνΈλ³„λ΅ λ¶„λ¦¬ | `MemberService`, `OrderService` κ°κ° λ…λ¦½μ  |
| **DIP**<br>(μμ΅΄ μ—­μ „) | κµ¬μ²΄ν™”κ°€ μ•„λ‹ μ¶”μƒν™”μ— μμ΅΄ | κµ¬ν„μ²΄κ°€ μ•„λ‹ μΈν„°νμ΄μ¤μ— μμ΅΄ |

---

### 2οΈβƒ£ μμ΅΄μ„± μ£Όμ…(DI)μ 3κ°€μ§€ λ°©λ²•

#### β‘  μƒμ„±μ μ£Όμ… (Constructor Injection) β­ κ¶μ¥
```java
public class OrderServiceImpl implements OrderService {
    private final MemberRepository memberRepository;
    
    public OrderServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
}
```
**μ¥μ **:
- λ¶λ³€μ„± λ³΄μ¥ (`final` μ‚¬μ© κ°€λ¥)
- ν•„μ μμ΅΄μ„± λ…ν™•ν™”
- ν…μ¤νΈν•κΈ° μ‰¬μ›€

#### β‘΅ Setter μ£Όμ…
```java
public class OrderServiceImpl implements OrderService {
    private MemberRepository memberRepository;
    
    public void setMemberRepository(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
}
```
**λ‹¨μ **: μμ΅΄μ„±μ΄ λ³€κ²½λ  μ μμ–΄ λ¶μ•μ •

#### β‘Ά ν•„λ“ μ£Όμ…
```java
public class OrderServiceImpl implements OrderService {
    @Autowired
    private MemberRepository memberRepository;
}
```
**λ‹¨μ **: ν…μ¤νΈν•κΈ° μ–΄λ µκ³ , DI μ»¨ν…μ΄λ„ μ—†μ΄ μ‚¬μ© λ¶κ°€

---

### 3οΈβƒ£ AppConfigμ μ—­ν• 

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚           AppConfig (μ„¤μ •μ)                β”‚
β”‚  - κ°μ²΄ μƒμ„±                                 β”‚
β”‚  - μμ΅΄κ΄€κ³„ μ„¤μ •                             β”‚
β”‚  - μ‹¤ν–‰ μμ—­κ³Ό κµ¬μ„± μμ—­μ λ¶„λ¦¬               β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                    β”‚
        β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
        β†“                       β†“
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”        β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  κµ¬μ„± μμ—­    β”‚        β”‚  μ‹¤ν–‰ μμ—­    β”‚
β”‚  (λ³€κ²½ O)    β”‚        β”‚  (λ³€κ²½ X)    β”‚
β”‚              β”‚        β”‚              β”‚
β”‚ AppConfig    β”‚        β”‚ Service      β”‚
β”‚              β”‚        β”‚ Repository   β”‚
β”‚              β”‚        β”‚ Policy       β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”        β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

**AppConfigμ μ±…μ„**:
- β… μ• ν”λ¦¬μΌ€μ΄μ…μ μ „μ²΄ λ™μ‘ λ°©μ‹ κµ¬μ„±
- β… κµ¬ν„ κ°μ²΄ μƒμ„± λ° μ—°κ²°
- β… μ •μ±… λ³€κ²½ μ‹ μ΄κ³³λ§ μμ •

**λΉ„μ¦λ‹μ¤ λ΅μ§μ μ±…μ„**:
- β… μ‹¤μ  λΉ„μ¦λ‹μ¤ λ΅μ§λ§ μν–‰
- β… μ–΄λ–¤ κµ¬ν„μ²΄κ°€ μ‚¬μ©λλ”μ§€ λ°λΌλ„ λ¨
- β… λ³€κ²½μ— λ‹«ν€μμ

---

### 4οΈβƒ£ ν• μΈ μ •μ±… λ³€κ²½ μμ‹

**κΈ°μ΅΄**: κ³ μ • ν• μΈ μ •μ±… (1000μ›)
```java
public DiscountPolicy discountPolicy() {
    return new FixDiscountPolicy();
}
```

**λ³€κ²½**: λΉ„μ¨ ν• μΈ μ •μ±… (10%)μΌλ΅ λ³€κ²½
```java
public DiscountPolicy discountPolicy() {
    return new RateDiscountPolicy();  // ν• μ¤„λ§ μμ •!
}
```

**μν–¥ λ²”μ„**:
- β… `AppConfig` ν• μ¤„λ§ μμ •
- β… `OrderServiceImpl` μ½”λ“ λ³€κ²½ μ—†μ
- β… λ‹¤λ¥Έ λΉ„μ¦λ‹μ¤ λ΅μ§ λ³€κ²½ μ—†μ

---

### 5οΈβƒ£ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ” μ΄μ 

#### μΈν„°νμ΄μ¤ μ—†μ΄ κµ¬μ²΄ ν΄λμ¤λ§ μ‚¬μ©ν•λ‹¤λ©΄?
```java
public class OrderServiceImpl {
    private MemoryMemberRepository memberRepository;
    private FixDiscountPolicy discountPolicy;
    
    // μ •μ±…μ„ λ³€κ²½ν•λ ¤λ©΄ μ΄ ν΄λμ¤λ¥Ό μμ •ν•΄μ•Ό ν•¨!
}
```

**λ¬Έμ μ **:
- κµ¬μ²΄ ν΄λμ¤μ— κ°•ν•κ² κ²°ν•© (tight coupling)
- μ •μ±… λ³€κ²½ μ‹ λ¨λ“  μ‚¬μ©μ² μμ • ν•„μ”
- ν…μ¤νΈμ© κ°€μ§ κ°μ²΄(Mock) μ£Όμ… λ¶κ°€

#### μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ©΄?
```java
public class OrderServiceImpl {
    private MemberRepository memberRepository;
    private DiscountPolicy discountPolicy;
    
    // μ–΄λ–¤ κµ¬ν„μ²΄λ“  μ£Όμ… κ°€λ¥!
}
```

**μ¥μ **:
- λμ¨ν• κ²°ν•© (loose coupling)
- κµ¬ν„μ²΄ κµμ²΄ μμ λ΅μ›€
- ν…μ¤νΈκ°€ μ‰¬μ›μ§

---

### 6οΈβƒ£ μ‹¤μ  κ°λ° νλ¦„

#### 1λ‹¨κ³„: μΈν„°νμ΄μ¤ μ„¤κ³„
```java
public interface DiscountPolicy {
    int discount(Member member, int price);
}
```

#### 2λ‹¨κ³„: κµ¬ν„μ²΄ μ‘μ„±
```java
public class FixDiscountPolicy implements DiscountPolicy {
    // κµ¬ν„...
}
```

#### 3λ‹¨κ³„: μ„λΉ„μ¤μ—μ„ μΈν„°νμ΄μ¤ μμ΅΄
```java
public class OrderServiceImpl implements OrderService {
    private final DiscountPolicy discountPolicy;
    
    public OrderServiceImpl(DiscountPolicy discountPolicy) {
        this.discountPolicy = discountPolicy;
    }
}
```

#### 4λ‹¨κ³„: AppConfigμ—μ„ μ΅°λ¦½
```java
public class AppConfig {
    public OrderService orderService() {
        return new OrderServiceImpl(discountPolicy());
    }
    
    public DiscountPolicy discountPolicy() {
        return new FixDiscountPolicy();
    }
}
```

---

## π― ν•µμ‹¬ μ”μ•½

### Before (μμ΅΄μ„± μ£Όμ… μ—†μ) β
```java
// OrderServiceImplμ΄ μ§μ ‘ μƒμ„±
private final DiscountPolicy discountPolicy = new FixDiscountPolicy();

// λ¬Έμ μ :
// 1. κµ¬μ²΄ ν΄λμ¤μ— μμ΅΄ (DIP μ„λ°)
// 2. μ •μ±… λ³€κ²½ μ‹ μ½”λ“ μμ • ν•„μ” (OCP μ„λ°)
// 3. ν…μ¤νΈν•κΈ° μ–΄λ ¤μ›€
```

### After (μμ΅΄μ„± μ£Όμ… μ μ©) β…
```java
// μƒμ„±μλ΅ μ£Όμ…λ°›μ
private final DiscountPolicy discountPolicy;

public OrderServiceImpl(DiscountPolicy discountPolicy) {
    this.discountPolicy = discountPolicy;
}

// μ¥μ :
// 1. μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ (DIP μ¤€μ)
// 2. μ½”λ“ μμ • μ—†μ΄ μ •μ±… λ³€κ²½ (OCP μ¤€μ)
// 3. ν…μ¤νΈν•κΈ° μ‰¬μ›€
```

---

## π“ λ‹¤μ ν•™μµ μ£Όμ 

1. **Spring IoC μ»¨ν…μ΄λ„**
   - `@Configuration`, `@Bean` μ–΄λ…Έν…μ΄μ…
   - ApplicationContext μ‚¬μ©

2. **μ»΄ν¬λ„νΈ μ¤μΊ”**
   - `@Component`, `@Autowired` μλ™ μμ΅΄μ„± μ£Όμ…
   - μλ™ λΉ λ“±λ΅

3. **μ‹±κΈ€ν†¤ ν¨ν„΄**
   - Springμ μ‹±κΈ€ν†¤ μ»¨ν…μ΄λ„
   - μ‹±κΈ€ν†¤μ μ£Όμμ 

4. **λ‹¤μ–‘ν• μμ΅΄κ΄€κ³„ μ£Όμ… λ°©λ²•**
   - μƒμ„±μ μ£Όμ… vs Setter μ£Όμ… vs ν•„λ“ μ£Όμ…
   - Lombok ν™μ©

---

## π’΅ ν•™μµ μ²΄ν¬λ¦¬μ¤νΈ

- [ ] μμ΅΄μ„± μ£Όμ…(DI)μ κ°λ…μ„ μ΄ν•΄ν–λ”κ°€?
- [ ] SOLID μ›μΉ™ μ¤‘ OCP, DIPλ¥Ό μ„¤λ…ν•  μ μλ”κ°€?
- [ ] AppConfigμ μ—­ν• κ³Ό ν•„μ”μ„±μ„ μ΄ν•΄ν–λ”κ°€?
- [ ] μƒμ„±μ μ£Όμ…μ΄ μ™ κ¶μ¥λλ”μ§€ μ•κ³  μλ”κ°€?
- [ ] μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ” μ΄μ λ¥Ό μ„¤λ…ν•  μ μλ”κ°€?
- [ ] ν• μΈ μ •μ±…μ„ λ³€κ²½ν•λ” λ°©λ²•μ„ μ•κ³  μλ”κ°€?
- [ ] Given-When-Then ν…μ¤νΈ ν¨ν„΄μ„ μ΄ν•΄ν–λ”κ°€?

---

## π“ μ°Έκ³  μλ£

- κΉ€μν•λ‹μ "μ¤ν”„λ§ ν•µμ‹¬ μ›λ¦¬ - κΈ°λ³ΈνΈ" κ°•μ
- [Spring κ³µμ‹ λ¬Έμ„ - Dependency Injection](https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-dependencies)
- [SOLID μ›μΉ™ μ •λ¦¬](https://ko.wikipedia.org/wiki/SOLID_(%EA%B0%9D%EC%B2%B4_%EC%A7%80%ED%96%A5_%EC%84%A4%EA%B3%84))

---

**μ‘μ„±μ**: AI Study Assistant  
**μµμΆ… μμ •μΌ**: 2026λ…„ 1μ›” 15μΌ
